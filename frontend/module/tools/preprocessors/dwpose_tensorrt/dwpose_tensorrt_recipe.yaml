nodes:
  load_image:
    class_type: LoadImage
    title: "Load Image"
  load_models_img:
    class_type: LoadDwposeTensorrtModels
    title: "Load Dwpose Models (Image)"
  dwpose_processor_img:
    class_type: DwposeTensorrt
    title: "Dwpose TensorRT (Image)"
  save_image:
    class_type: SaveImage
    title: "Save Pose Map Image"
    params: {}

  load_video:
    class_type: LoadVideo
    title: "Load Video"
  get_frames:
    class_type: GetVideoComponents
    title: "Get Video Frames"
  load_models_vid:
    class_type: LoadDwposeTensorrtModels
    title: "Load Dwpose Models (Video)"
  dwpose_processor_vid:
    class_type: DwposeTensorrt
    title: "Dwpose TensorRT (Video)"
  create_video:
    class_type: CreateVideo
    title: "Create Pose Map Video"
  save_video:
    class_type: SaveVideo
    title: "Save Pose Map Video"
    params:
      format: "mp4"
      codec: "h264"

connections:
  - from: "load_image:0"
    to: "dwpose_processor_img:images"
  - from: "load_models_img:0"
    to: "dwpose_processor_img:yolox_trt_model"
  - from: "load_models_img:1"
    to: "dwpose_processor_img:dwpose_trt_model"
  - from: "dwpose_processor_img:0"
    to: "save_image:images"

  - from: "load_video:0"
    to: "get_frames:video"
  - from: "get_frames:0"
    to: "dwpose_processor_vid:images"
  - from: "load_models_vid:0"
    to: "dwpose_processor_vid:yolox_trt_model"
  - from: "load_models_vid:1"
    to: "dwpose_processor_vid:dwpose_trt_model"
  - from: "dwpose_processor_vid:0"
    to: "create_video:images"
  - from: "create_video:0"
    to: "save_video:video"

ui_map:
  yolox_precision:
    - "load_models_img:yolox_precision"
    - "load_models_vid:yolox_precision"
  dwpose_precision:
    - "load_models_img:dwpose_precision"
    - "load_models_vid:dwpose_precision"
  show_body:
    - "dwpose_processor_img:show_body"
    - "dwpose_processor_vid:show_body"
  show_hands:
    - "dwpose_processor_img:show_hands"
    - "dwpose_processor_vid:show_hands"
  show_face:
    - "dwpose_processor_img:show_face"
    - "dwpose_processor_vid:show_face"
  filename_prefix:
    - "save_image:filename_prefix"
    - "save_video:filename_prefix"

  input_image_filename: "load_image:image"

  input_video_filename: "load_video:file"
  fps: "create_video:fps"