nodes:
  load_image:
    class_type: LoadImage
    title: "Load Image"
  
  downscale_image:
    class_type: ImageScale
    title: "Downscale Image (if needed)"
    params:
      upscale_method: "area"
      crop: "disabled"

  upscale_model_loader_img:
    class_type: LoadUpscalerTensorrtModel
    title: "Load TRT Model (Image)"

  upscaler_trt_img:
    class_type: UpscalerTensorrt
    title: "Upscale with TRT (Image)"

  save_image:
    class_type: SaveImage
    title: "Save Upscaled Image"

  load_video:
    class_type: LoadVideo
    title: "Load Video"
  
  get_frames:
    class_type: GetVideoComponents
    title: "Get Video Frames"

  downscale_frames:
    class_type: ImageScale
    title: "Downscale Frames (if needed)"
    params:
      upscale_method: "area"
      crop: "disabled"

  upscale_model_loader_vid:
    class_type: LoadUpscalerTensorrtModel
    title: "Load TRT Model (Video)"

  upscaler_trt_vid:
    class_type: UpscalerTensorrt
    title: "Upscale with TRT (Video)"

  create_video:
    class_type: CreateVideo
    title: "Create Upscaled Video"

  save_video:
    class_type: SaveVideo
    title: "Save Upscaled Video"
    params:
      format: "mp4"
      codec: "h264"

connections:
  - from: "load_image:0"
    to: "downscale_image:image"
  - from: "downscale_image:0"
    to: "upscaler_trt_img:images"
  - from: "upscale_model_loader_img:0"
    to: "upscaler_trt_img:upscaler_trt_model"
  - from: "upscaler_trt_img:0"
    to: "save_image:images"

  - from: "load_video:0"
    to: "get_frames:video"
  - from: "get_frames:0"
    to: "downscale_frames:image"
  - from: "downscale_frames:0"
    to: "upscaler_trt_vid:images"
  - from: "upscale_model_loader_vid:0"
    to: "upscaler_trt_vid:upscaler_trt_model"
  - from: "upscaler_trt_vid:0"
    to: "create_video:images"
  - from: "create_video:0"
    to: "save_video:video"

ui_map:
  upscaler_model: 
    - "upscale_model_loader_img:model"
    - "upscale_model_loader_vid:model"
  resize_to:
    - "upscaler_trt_img:resize_to"
    - "upscaler_trt_vid:resize_to"
  precision: 
    - "upscale_model_loader_img:precision"
    - "upscale_model_loader_vid:precision"
  downscale_width:
    - "downscale_image:width"
    - "downscale_frames:width"
  downscale_height:
    - "downscale_image:height"
    - "downscale_frames:height"

  input_image_filename: "load_image:image"
  
  input_video_filename: "load_video:file"
  output_fps: "create_video:fps"

  filename_prefix:
    - "save_image:filename_prefix"
    - "save_video:filename_prefix"