nodes:
  unet_loader:
    class_type: UNETLoader
    title: "Load FLUX UNET"
    params:
      weight_dtype: "default"
  vae_loader:
    class_type: VAELoader
    title: "Load FLUX VAE"
  clip_loader:
    class_type: DualCLIPLoader
    title: "Load FLUX Dual CLIP"
    params:
      type: "flux"
      device: "default"
  flux_guidance:
    class_type: FluxGuidance
    title: "FluxGuidance"

connections:
  - from: "unet_loader:0"
    to: "ksampler:model"
  - from: "clip_loader:0"
    to: "pos_prompt:clip"
  - from: "clip_loader:0"
    to: "neg_prompt:clip"
  - from: "vae_loader:0"
    to: "vae_decode:vae"
  - from: "vae_loader:0"
    to: "vae_encode:vae"
  - from: "pos_prompt:0"
    to: "flux_guidance:conditioning"
  - from: "flux_guidance:0"
    to: "ksampler:positive"
  - from: "neg_prompt:0"
    to: "ksampler:negative"

dynamic_controlnet_chains:
  controlnet_chain:
    template: "ControlNetApplyAdvanced"
    ksampler_node: "ksampler"

dynamic_style_chains:
  style_chain:
    flux_guidance_node: "flux_guidance"
    ksampler_node: "ksampler"

dynamic_conditioning_chains:
  conditioning_chain:
    flux_guidance_node: "flux_guidance"
    ksampler_node: "ksampler"
    clip_source: "clip_loader:0"

ui_map:
  unet_name: "unet_loader:unet_name"
  vae_name: "vae_loader:vae_name"
  clip1_name: "clip_loader:clip_name1"
  clip2_name: "clip_loader:clip_name2"
  guidance: "flux_guidance:guidance"