nodes:
  unet_loader:
    class_type: UNETLoader
    title: "Load Diffusion Model"
    params:
      weight_dtype: "default"
  vae_loader:
    class_type: VAELoader
    title: "Load VAE"
  clip_loader:
    class_type: CLIPLoader
    title: "Load CLIP"
    params:
      type: "lumina2"
      device: "default"
  model_sampler:
    class_type: ModelSamplingAuraFlow
    params:
      shift: 3.0

connections:
  - from: "unet_loader:0"
    to: "model_sampler:model"
  - from: "model_sampler:0"
    to: "ksampler:model"
  
  - from: "clip_loader:0"
    to: "pos_prompt:clip"
  - from: "clip_loader:0"
    to: "neg_prompt:clip"
    
  - from: "pos_prompt:0"
    to: "ksampler:positive"
  - from: "neg_prompt:0"
    to: "ksampler:negative"
  
  - from: "vae_loader:0"
    to: "vae_decode:vae"
  - from: "vae_loader:0"
    to: "vae_encode:vae"

dynamic_lora_chains:
  lora_chain:
    template: "LoraLoader"
    output_map:
      "unet_loader:0": "model"
      "clip_loader:0": "clip"
    input_map:
      "model": "model"
      "clip": "clip"
    end_input_map:
      "model": ["model_sampler:model"]
      "clip": ["pos_prompt:clip", "neg_prompt:clip"]

dynamic_diffsynth_controlnet_chains:
  diffsynth_controlnet_chain:
    template: "QwenImageDiffsynthControlnet"
    model_sampler_node: "model_sampler"
    ksampler_node: "ksampler"
    vae_source: "vae_loader:0"

ui_map:
  unet_name: "unet_loader:unet_name"
  vae_name: "vae_loader:vae_name"
  clip_name: "clip_loader:clip_name"